<!DOCTYPE html>
 <html>
   <head>
      <style type="text/css">
         .block {
            background-color: #ccc;
            padding: 1em;
            margin: 1em;
         }
      </style>
   </head>
   <body>
      <h1>Tree testing</h1>
      <noscript>
         <span style="color: #f00; font-weight: bold;">
            You need to turn on JavaScript.
         </span>
      </noscript>
      <div class="block">
        <button onclick="datainfo()">Data Info</button>
        <button onclick="tree()">Tree</button>
      </div>

      <script src="https://autobahn.s3.amazonaws.com/autobahnjs/latest/autobahn.min.jgz"></script>

      <script type="text/javascript">
         var session = null;

         // the URL of the WAMP Router (e.g. Crossbar.io)
         //
         var wsuri;
         if (document.location.origin == "file://") {
            wsuri = "ws://localhost:9002";
         } else {
            wsuri = "ws://" + document.location.hostname + ":9002";
         }

         // connect to WAMP server
         //
         var connection = new autobahn.Connection({
            url: wsuri,
            realm: 'realm1'
         });

         connection.onopen = function (new_session) {
            console.log("connected to " + wsuri);
            session = new_session;
         };

         connection.onclose = function (reason, details) {
            console.log("connection gone", reason, details);
            new_session = null;
         }

         connection.open();

         function datainfo() {
            session.call("test.ipca.datainfo", [], {dataset:'mnist_12_1k_outtest1'}).then(
               function (res) {
                  console.log(res);
               }
            );
         }
         function tree() {
            session.call("test.ipca.tree", [], {dataset:'mnist_12_1k_outtest1'}).then(
               function (res) {
                  console.log(res);
               }
            );
         }


     </script>
   </body>
 </html>
